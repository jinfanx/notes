## ACID
- 原子性（Atomicity）：事务是一个原子操作，由一系列动作组成。事务的原子性确保动作要么全部完成，要么完全不起作用。

- 一致性（Consistency）：事务执行前后都要是一致状态，事务的开始和结束状态都是一致的，事务执行过程中的状态是不一致的，如转账事务包括从A账户扣减和给B账户增加，只执行到扣减，未执行增加，则此时就是不一致状态。

- 隔离性（Isolation）：可能有许多事务会同时处理相同的数据，因此每个事务都应该与其他事务隔离开来，防止数据损坏。

- 持久性（Durability）：事务一旦提交，数据便必须被持久化，不能因为断电、宕机等导致数据丢失，mysql是通过redolog来保证持久性的

## spring事务
### 基本概念
- 脏读
读取到错误的数据，发生在Read Uncommited时，读取到的数据被回滚了

- 不可重复读
多次读取的同一条数据不一致，是由于后面读取时数据被修改了，发生了update

- 幻读
多次读取记录数不一致，由于发生了delete或insert


### 隔离级别
事务并发执行时的策略
- Read Uncommited
允许读取未提交的数据，最宽松的策略，可能发生脏读、幻读、不可重复读

- Read Commited
允许一个事务读取另一个事务已提交的数据，可以避免脏读，不能防止不可重复读与幻读。

- Repeatable Read
可重复读，通过给数据加行锁实现，在一个事务读取时，只允许其他事务给该事务加读锁，不允许加写锁，从而保证了可重复度，但不能防止幻读

- Serialize
通过加表锁实现，可靠性最高但效率最低，可以防止脏读、幻读、不可重复读等问题

### 传播机制
- required
有外层事务则用外层事务，没有外层事务则新建事务

- require new
新建事务

- support
有外层事务用外层事务，没有以非事务方式运行

- not supporte
不管外层事务，内层不支持事务

- never
不允许有外层事务，有则抛异常

- mandatory
必须有外层事务，否则抛异常

- netsted
内存事务独立回滚，若内层事务已把异常消化掉，则外层继续执行，否则外层事务回滚

### 事务超时

## 常见问题

### 事务回滚失败场景
- 事务未生效，不受事务管理。如方法名称不在事务管理器配置的名称列表中、bean不受spring管理等
- 事务已生效，但是不符合回滚条件，如未匹配到rollbackFor或者配置了发生异常也不回滚

### redolog和undolog
